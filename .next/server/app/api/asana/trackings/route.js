"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/asana/trackings/route";
exports.ids = ["app/api/asana/trackings/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fasana%2Ftrackings%2Froute&page=%2Fapi%2Fasana%2Ftrackings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fasana%2Ftrackings%2Froute.ts&appDir=%2Fworkspaces%2Fsistemaduri%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2Fsistemaduri&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fasana%2Ftrackings%2Froute&page=%2Fapi%2Fasana%2Ftrackings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fasana%2Ftrackings%2Froute.ts&appDir=%2Fworkspaces%2Fsistemaduri%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2Fsistemaduri&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _workspaces_sistemaduri_src_app_api_asana_trackings_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/asana/trackings/route.ts */ \"(rsc)/./src/app/api/asana/trackings/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/asana/trackings/route\",\n        pathname: \"/api/asana/trackings\",\n        filename: \"route\",\n        bundlePath: \"app/api/asana/trackings/route\"\n    },\n    resolvedPagePath: \"/workspaces/sistemaduri/src/app/api/asana/trackings/route.ts\",\n    nextConfigOutput,\n    userland: _workspaces_sistemaduri_src_app_api_asana_trackings_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/asana/trackings/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhc2FuYSUyRnRyYWNraW5ncyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYXNhbmElMkZ0cmFja2luZ3MlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhc2FuYSUyRnRyYWNraW5ncyUyRnJvdXRlLnRzJmFwcERpcj0lMkZ3b3Jrc3BhY2VzJTJGc2lzdGVtYWR1cmklMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRndvcmtzcGFjZXMlMkZzaXN0ZW1hZHVyaSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDWTtBQUN6RjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3BvcnRmb2xpby1wYWdlcy8/YjQ2MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvd29ya3NwYWNlcy9zaXN0ZW1hZHVyaS9zcmMvYXBwL2FwaS9hc2FuYS90cmFja2luZ3Mvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FzYW5hL3RyYWNraW5ncy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FzYW5hL3RyYWNraW5nc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYXNhbmEvdHJhY2tpbmdzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL3dvcmtzcGFjZXMvc2lzdGVtYWR1cmkvc3JjL2FwcC9hcGkvYXNhbmEvdHJhY2tpbmdzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hc2FuYS90cmFja2luZ3Mvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fasana%2Ftrackings%2Froute&page=%2Fapi%2Fasana%2Ftrackings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fasana%2Ftrackings%2Froute.ts&appDir=%2Fworkspaces%2Fsistemaduri%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2Fsistemaduri&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/asana/trackings/route.ts":
/*!**********************************************!*\
  !*** ./src/app/api/asana/trackings/route.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_asana_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/asana-client */ \"(rsc)/./src/lib/asana-client.ts\");\n// src/app/api/asana/trackings/route.ts - Fix usando a mesma lógica do test-asana\n\n\nasync function GET() {\n    try {\n        const asanaClient = new _lib_asana_client__WEBPACK_IMPORTED_MODULE_1__.AsanaClient();\n        // 1. Get workspace\n        const workspaces = await asanaClient.getWorkspaces();\n        if (workspaces.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Nenhum workspace encontrado\"\n            }, {\n                status: 404\n            });\n        }\n        const workspace = workspaces[0];\n        // 2. Find \"Operacional\" project (same logic as test-asana)\n        const operationalProject = await asanaClient.findOperationalProject(workspace.gid);\n        // 3. Get tasks from Operacional project\n        const tasks = await asanaClient.getProjectTasks(operationalProject.gid);\n        console.log(`Found ${tasks.length} tasks in Operacional project`);\n        // 4. Transform ALL tasks to tracking format (remove filters for now)\n        const trackings = tasks.filter((task)=>task.name && task.name.trim()) // Only filter empty names\n        .map((task)=>transformAsanaTaskToTracking(task));\n        console.log(`Transformed ${trackings.length} trackings`);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: trackings,\n            meta: {\n                workspace: workspace.name,\n                project: operationalProject.name,\n                totalTasks: tasks.length,\n                trackingTasks: trackings.length,\n                lastUpdate: new Date().toISOString()\n            }\n        });\n    } catch (error) {\n        console.error(\"Get Trackings Error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Falha ao buscar trackings do projeto Operacional\",\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\nfunction transformAsanaTaskToTracking(task) {\n    // Extract custom fields with flexible field name matching\n    const customFields = {};\n    if (task.custom_fields) {\n        task.custom_fields.forEach((field)=>{\n            if (field.name) {\n                const key = field.name.toLowerCase().normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\") // Remove accents\n                .replace(/[^a-z0-9\\s]/g, \"\").replace(/\\s+/g, \"_\");\n                customFields[key] = field.text_value || field.number_value?.toString() || field.enum_value?.name || \"\";\n            }\n        });\n    }\n    // Generate clean ID for URL\n    const trackingId = task.name.toLowerCase().normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\") // Remove accents\n    .replace(/[°\\s-]/g, \"\").replace(/[^a-z0-9]/g, \"\");\n    return {\n        id: trackingId,\n        asanaId: task.gid,\n        title: task.name,\n        description: task.notes || \"\",\n        status: task.completed ? \"Conclu\\xeddo\" : \"Em Progresso\",\n        lastUpdate: new Date(task.modified_at || task.created_at).toLocaleDateString(\"pt-BR\"),\n        transport: {\n            exporter: extractField(customFields, [\n                \"exportador\",\n                \"exporter\",\n                \"shipper\"\n            ]),\n            company: extractField(customFields, [\n                \"companhia\",\n                \"company\",\n                \"shipping_company\",\n                \"armador\"\n            ]),\n            vessel: extractField(customFields, [\n                \"navio\",\n                \"vessel\",\n                \"ship\",\n                \"embarcacao\"\n            ]),\n            blAwb: extractField(customFields, [\n                \"bl_awb\",\n                \"bl\",\n                \"awb\",\n                \"bill_of_lading\",\n                \"conhecimento\"\n            ]),\n            containers: parseMultilineField(extractField(customFields, [\n                \"containers\",\n                \"container\",\n                \"conteineres\"\n            ])),\n            terminal: extractField(customFields, [\n                \"terminal\",\n                \"port\",\n                \"porto\"\n            ])\n        },\n        schedule: {\n            eta: formatDate(extractField(customFields, [\n                \"eta\",\n                \"chegada\",\n                \"arrival\",\n                \"previsao_chegada\"\n            ])),\n            freetime: formatDate(extractField(customFields, [\n                \"freetime\",\n                \"fim_freetime\",\n                \"free_time\",\n                \"prazo_freetime\"\n            ])),\n            responsible: task.assignee?.name || extractField(customFields, [\n                \"responsavel\",\n                \"responsible\",\n                \"encarregado\"\n            ]),\n            status: extractField(customFields, [\n                \"status_entrega\",\n                \"delivery_status\",\n                \"status\",\n                \"situacao\"\n            ]) || (task.completed ? \"Conclu\\xeddo\" : \"Em Progresso\")\n        },\n        partners: {\n            dispatcher: extractField(customFields, [\n                \"despachante\",\n                \"dispatcher\",\n                \"customs_broker\",\n                \"despachante_aduaneiro\"\n            ]),\n            transporter: extractField(customFields, [\n                \"transportadora\",\n                \"transporter\",\n                \"logistics\",\n                \"transportador\"\n            ]),\n            invoices: parseMultilineField(extractField(customFields, [\n                \"invoices\",\n                \"faturas\",\n                \"invoice_numbers\",\n                \"nf\"\n            ]))\n        }\n    };\n}\nfunction extractField(customFields, possibleNames) {\n    for (const name of possibleNames){\n        if (customFields[name]) {\n            return customFields[name];\n        }\n    }\n    return \"\";\n}\nfunction parseMultilineField(str) {\n    if (!str) return [];\n    return str.split(/[,\\n;]/).map((s)=>s.trim()).filter(Boolean);\n}\nfunction formatDate(dateStr) {\n    if (!dateStr) return \"\";\n    try {\n        const date = new Date(dateStr);\n        return date.toLocaleDateString(\"pt-BR\");\n    } catch  {\n        return dateStr;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hc2FuYS90cmFja2luZ3Mvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsaUZBQWlGO0FBQ3RDO0FBQ007QUFFMUMsZUFBZUU7SUFDcEIsSUFBSTtRQUNGLE1BQU1DLGNBQWMsSUFBSUYsMERBQVdBO1FBRW5DLG1CQUFtQjtRQUNuQixNQUFNRyxhQUFhLE1BQU1ELFlBQVlFLGFBQWE7UUFDbEQsSUFBSUQsV0FBV0UsTUFBTSxLQUFLLEdBQUc7WUFDM0IsT0FBT04scURBQVlBLENBQUNPLElBQUksQ0FBQztnQkFDdkJDLFNBQVM7Z0JBQ1RDLE9BQU87WUFDVCxHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDbkI7UUFFQSxNQUFNQyxZQUFZUCxVQUFVLENBQUMsRUFBRTtRQUUvQiwyREFBMkQ7UUFDM0QsTUFBTVEscUJBQXFCLE1BQU1ULFlBQVlVLHNCQUFzQixDQUFDRixVQUFVRyxHQUFHO1FBRWpGLHdDQUF3QztRQUN4QyxNQUFNQyxRQUFRLE1BQU1aLFlBQVlhLGVBQWUsQ0FBQ0osbUJBQW1CRSxHQUFHO1FBQ3RFRyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUVILE1BQU1ULE1BQU0sQ0FBQyw2QkFBNkIsQ0FBQztRQUVoRSxxRUFBcUU7UUFDckUsTUFBTWEsWUFBWUosTUFDZkssTUFBTSxDQUFDQyxDQUFBQSxPQUFRQSxLQUFLQyxJQUFJLElBQUlELEtBQUtDLElBQUksQ0FBQ0MsSUFBSSxJQUFJLDBCQUEwQjtTQUN4RUMsR0FBRyxDQUFDSCxDQUFBQSxPQUFRSSw2QkFBNkJKO1FBRTVDSixRQUFRQyxHQUFHLENBQUMsQ0FBQyxZQUFZLEVBQUVDLFVBQVViLE1BQU0sQ0FBQyxVQUFVLENBQUM7UUFFdkQsT0FBT04scURBQVlBLENBQUNPLElBQUksQ0FBQztZQUN2QkMsU0FBUztZQUNUa0IsTUFBTVA7WUFDTlEsTUFBTTtnQkFDSmhCLFdBQVdBLFVBQVVXLElBQUk7Z0JBQ3pCTSxTQUFTaEIsbUJBQW1CVSxJ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QXdCO1lBQy9HdUMsYUFBYWYsYUFBYXhCLGNBQWM7Z0JBQUM7Z0JBQWtCO2dCQUFlO2dCQUFhO2FBQWdCO1lBQ3ZHd0MsVUFBVVgsb0JBQW9CTCxhQUFheEIsY0FBYztnQkFBQztnQkFBWTtnQkFBVztnQkFBbUI7YUFBSztRQUMzRztJQUNGO0FBQ0Y7QUFFQSxTQUFTd0IsYUFBYXhCLFlBQW9DLEVBQUV5QyxhQUF1QjtJQUNqRixLQUFLLE1BQU14RCxRQUFRd0QsY0FBZTtRQUNoQyxJQUFJekMsWUFBWSxDQUFDZixLQUFLLEVBQUU7WUFDdEIsT0FBT2UsWUFBWSxDQUFDZixLQUFLO1FBQzNCO0lBQ0Y7SUFDQSxPQUFPO0FBQ1Q7QUFFQSxTQUFTNEMsb0JBQW9CYSxHQUFXO0lBQ3RDLElBQUksQ0FBQ0EsS0FBSyxPQUFPLEVBQUU7SUFDbkIsT0FBT0EsSUFBSUMsS0FBSyxDQUFDLFVBQVV4RCxHQUFHLENBQUN5RCxDQUFBQSxJQUFLQSxFQUFFMUQsSUFBSSxJQUFJSCxNQUFNLENBQUM4RDtBQUN2RDtBQUVBLFNBQVNaLFdBQVdhLE9BQWU7SUFDakMsSUFBSSxDQUFDQSxTQUFTLE9BQU87SUFDckIsSUFBSTtRQUNGLE1BQU1DLE9BQU8sSUFBSXBELEtBQUttRDtRQUN0QixPQUFPQyxLQUFLMUIsa0JBQWtCLENBQUM7SUFDakMsRUFBRSxPQUFNO1FBQ04sT0FBT3lCO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BvcnRmb2xpby1wYWdlcy8uL3NyYy9hcHAvYXBpL2FzYW5hL3RyYWNraW5ncy9yb3V0ZS50cz9hMTViIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9hcHAvYXBpL2FzYW5hL3RyYWNraW5ncy9yb3V0ZS50cyAtIEZpeCB1c2FuZG8gYSBtZXNtYSBsw7NnaWNhIGRvIHRlc3QtYXNhbmFcbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IEFzYW5hQ2xpZW50IH0gZnJvbSAnQC9saWIvYXNhbmEtY2xpZW50JztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBhc2FuYUNsaWVudCA9IG5ldyBBc2FuYUNsaWVudCgpO1xuXG4gICAgLy8gMS4gR2V0IHdvcmtzcGFjZVxuICAgIGNvbnN0IHdvcmtzcGFjZXMgPSBhd2FpdCBhc2FuYUNsaWVudC5nZXRXb3Jrc3BhY2VzKCk7XG4gICAgaWYgKHdvcmtzcGFjZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdOZW5odW0gd29ya3NwYWNlIGVuY29udHJhZG8nXG4gICAgICB9LCB7IHN0YXR1czogNDA0IH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHdvcmtzcGFjZSA9IHdvcmtzcGFjZXNbMF07XG5cbiAgICAvLyAyLiBGaW5kIFwiT3BlcmFjaW9uYWxcIiBwcm9qZWN0IChzYW1lIGxvZ2ljIGFzIHRlc3QtYXNhbmEpXG4gICAgY29uc3Qgb3BlcmF0aW9uYWxQcm9qZWN0ID0gYXdhaXQgYXNhbmFDbGllbnQuZmluZE9wZXJhdGlvbmFsUHJvamVjdCh3b3Jrc3BhY2UuZ2lkKTtcblxuICAgIC8vIDMuIEdldCB0YXNrcyBmcm9tIE9wZXJhY2lvbmFsIHByb2plY3RcbiAgICBjb25zdCB0YXNrcyA9IGF3YWl0IGFzYW5hQ2xpZW50LmdldFByb2plY3RUYXNrcyhvcGVyYXRpb25hbFByb2plY3QuZ2lkKTtcbiAgICBjb25zb2xlLmxvZyhgRm91bmQgJHt0YXNrcy5sZW5ndGh9IHRhc2tzIGluIE9wZXJhY2lvbmFsIHByb2plY3RgKTtcblxuICAgIC8vIDQuIFRyYW5zZm9ybSBBTEwgdGFza3MgdG8gdHJhY2tpbmcgZm9ybWF0IChyZW1vdmUgZmlsdGVycyBmb3Igbm93KVxuICAgIGNvbnN0IHRyYWNraW5ncyA9IHRhc2tzXG4gICAgICAuZmlsdGVyKHRhc2sgPT4gdGFzay5uYW1lICYmIHRhc2submFtZS50cmltKCkpIC8vIE9ubHkgZmlsdGVyIGVtcHR5IG5hbWVzXG4gICAgICAubWFwKHRhc2sgPT4gdHJhbnNmb3JtQXNhbmFUYXNrVG9UcmFja2luZyh0YXNrKSk7XG5cbiAgICBjb25zb2xlLmxvZyhgVHJhbnNmb3JtZWQgJHt0cmFja2luZ3MubGVuZ3RofSB0cmFja2luZ3NgKTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YTogdHJhY2tpbmdzLFxuICAgICAgbWV0YToge1xuICAgICAgICB3b3Jrc3BhY2U6IHdvcmtzcGFjZS5uYW1lLFxuICAgICAgICBwcm9qZWN0OiBvcGVyYXRpb25hbFByb2plY3QubmFtZSxcbiAgICAgICAgdG90YWxUYXNrczogdGFza3MubGVuZ3RoLFxuICAgICAgICB0cmFja2luZ1Rhc2tzOiB0cmFja2luZ3MubGVuZ3RoLFxuICAgICAgICBsYXN0VXBkYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH1cbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0dldCBUcmFja2luZ3MgRXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiAnRmFsaGEgYW8gYnVzY2FyIHRyYWNraW5ncyBkbyBwcm9qZXRvIE9wZXJhY2lvbmFsJyxcbiAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1Bc2FuYVRhc2tUb1RyYWNraW5nKHRhc2s6IGFueSkge1xuICAvLyBFeHRyYWN0IGN1c3RvbSBmaWVsZHMgd2l0aCBmbGV4aWJsZSBmaWVsZCBuYW1lIG1hdGNoaW5nXG4gIGNvbnN0IGN1c3RvbUZpZWxkczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICBpZiAodGFzay5jdXN0b21fZmllbGRzKSB7XG4gICAgdGFzay5jdXN0b21fZmllbGRzLmZvckVhY2goKGZpZWxkOiBhbnkpID0+IHtcbiAgICAgIGlmIChmaWVsZC5uYW1lKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGZpZWxkLm5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICAgIC5ub3JtYWxpemUoJ05GRCcpXG4gICAgICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csICcnKSAvLyBSZW1vdmUgYWNjZW50c1xuICAgICAgICAgIC5yZXBsYWNlKC9bXmEtejAtOVxcc10vZywgJycpXG4gICAgICAgICAgLnJlcGxhY2UoL1xccysvZywgJ18nKTtcbiAgICAgICAgXG4gICAgICAgIGN1c3RvbUZpZWxkc1trZXldID0gZmllbGQudGV4dF92YWx1ZSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLm51bWJlcl92YWx1ZT8udG9TdHJpbmcoKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLmVudW1fdmFsdWU/Lm5hbWUgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnJztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8vIEdlbmVyYXRlIGNsZWFuIElEIGZvciBVUkxcbiAgY29uc3QgdHJhY2tpbmdJZCA9IHRhc2submFtZVxuICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgLm5vcm1hbGl6ZSgnTkZEJylcbiAgICAucmVwbGFjZSgvW1xcdTAzMDAtXFx1MDM2Zl0vZywgJycpIC8vIFJlbW92ZSBhY2NlbnRzXG4gICAgLnJlcGxhY2UoL1vCsFxccy1dL2csICcnKVxuICAgIC5yZXBsYWNlKC9bXmEtejAtOV0vZywgJycpO1xuXG4gIHJldHVybiB7XG4gICAgaWQ6IHRyYWNraW5nSWQsXG4gICAgYXNhbmFJZDogdGFzay5naWQsXG4gICAgdGl0bGU6IHRhc2submFtZSxcbiAgICBkZXNjcmlwdGlvbjogdGFzay5ub3RlcyB8fCAnJyxcbiAgICBzdGF0dXM6IHRhc2suY29tcGxldGVkID8gJ0NvbmNsdcOtZG8nIDogJ0VtIFByb2dyZXNzbycsXG4gICAgbGFzdFVwZGF0ZTogbmV3IERhdGUodGFzay5tb2RpZmllZF9hdCB8fCB0YXNrLmNyZWF0ZWRfYXQpLnRvTG9jYWxlRGF0ZVN0cmluZygncHQtQlInKSxcbiAgICB0cmFuc3BvcnQ6IHtcbiAgICAgIGV4cG9ydGVyOiBleHRyYWN0RmllbGQoY3VzdG9tRmllbGRzLCBbJ2V4cG9ydGFkb3InLCAnZXhwb3J0ZXInLCAnc2hpcHBlciddKSxcbiAgICAgIGNvbXBhbnk6IGV4dHJhY3RGaWVsZChjdXN0b21GaWVsZHMsIFsnY29tcGFuaGlhJywgJ2NvbXBhbnknLCAnc2hpcHBpbmdfY29tcGFueScsICdhcm1hZG9yJ10pLFxuICAgICAgdmVzc2VsOiBleHRyYWN0RmllbGQoY3VzdG9tRmllbGRzLCBbJ25hdmlvJywgJ3Zlc3NlbCcsICdzaGlwJywgJ2VtYmFyY2FjYW8nXSksXG4gICAgICBibEF3YjogZXh0cmFjdEZpZWxkKGN1c3RvbUZpZWxkcywgWydibF9hd2InLCAnYmwnLCAnYXdiJywgJ2JpbGxfb2ZfbGFkaW5nJywgJ2NvbmhlY2ltZW50byddKSxcbiAgICAgIGNvbnRhaW5lcnM6IHBhcnNlTXVsdGlsaW5lRmllbGQoZXh0cmFjdEZpZWxkKGN1c3RvbUZpZWxkcywgWydjb250YWluZXJzJywgJ2NvbnRhaW5lcicsICdjb250ZWluZXJlcyddKSksXG4gICAgICB0ZXJtaW5hbDogZXh0cmFjdEZpZWxkKGN1c3RvbUZpZWxkcywgWyd0ZXJtaW5hbCcsICdwb3J0JywgJ3BvcnRvJ10pXG4gICAgfSxcbiAgICBzY2hlZHVsZToge1xuICAgICAgZXRhOiBmb3JtYXREYXRlKGV4dHJhY3RGaWVsZChjdXN0b21GaWVsZHMsIFsnZXRhJywgJ2NoZWdhZGEnLCAnYXJyaXZhbCcsICdwcmV2aXNhb19jaGVnYWRhJ10pKSxcbiAgICAgIGZyZWV0aW1lOiBmb3JtYXREYXRlKGV4dHJhY3RGaWVsZChjdXN0b21GaWVsZHMsIFsnZnJlZXRpbWUnLCAnZmltX2ZyZWV0aW1lJywgJ2ZyZWVfdGltZScsICdwcmF6b19mcmVldGltZSddKSksXG4gICAgICByZXNwb25zaWJsZTogdGFzay5hc3NpZ25lZT8ubmFtZSB8fCBleHRyYWN0RmllbGQoY3VzdG9tRmllbGRzLCBbJ3Jlc3BvbnNhdmVsJywgJ3Jlc3BvbnNpYmxlJywgJ2VuY2FycmVnYWRvJ10pLFxuICAgICAgc3RhdHVzOiBleHRyYWN0RmllbGQoY3VzdG9tRmllbGRzLCBbJ3N0YXR1c19lbnRyZWdhJywgJ2RlbGl2ZXJ5X3N0YXR1cycsICdzdGF0dXMnLCAnc2l0dWFjYW8nXSkgfHwgXG4gICAgICAgICAgICAgKHRhc2suY29tcGxldGVkID8gJ0NvbmNsdcOtZG8nIDogJ0VtIFByb2dyZXNzbycpXG4gICAgfSxcbiAgICBwYXJ0bmVyczoge1xuICAgICAgZGlzcGF0Y2hlcjogZXh0cmFjdEZpZWxkKGN1c3RvbUZpZWxkcywgWydkZXNwYWNoYW50ZScsICdkaXNwYXRjaGVyJywgJ2N1c3RvbXNfYnJva2VyJywgJ2Rlc3BhY2hhbnRlX2FkdWFuZWlybyddKSxcbiAgICAgIHRyYW5zcG9ydGVyOiBleHRyYWN0RmllbGQoY3VzdG9tRmllbGRzLCBbJ3RyYW5zcG9ydGFkb3JhJywgJ3RyYW5zcG9ydGVyJywgJ2xvZ2lzdGljcycsICd0cmFuc3BvcnRhZG9yJ10pLFxuICAgICAgaW52b2ljZXM6IHBhcnNlTXVsdGlsaW5lRmllbGQoZXh0cmFjdEZpZWxkKGN1c3RvbUZpZWxkcywgWydpbnZvaWNlcycsICdmYXR1cmFzJywgJ2ludm9pY2VfbnVtYmVycycsICduZiddKSlcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RGaWVsZChjdXN0b21GaWVsZHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4sIHBvc3NpYmxlTmFtZXM6IHN0cmluZ1tdKTogc3RyaW5nIHtcbiAgZm9yIChjb25zdCBuYW1lIG9mIHBvc3NpYmxlTmFtZXMpIHtcbiAgICBpZiAoY3VzdG9tRmllbGRzW25hbWVdKSB7XG4gICAgICByZXR1cm4gY3VzdG9tRmllbGRzW25hbWVdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbmZ1bmN0aW9uIHBhcnNlTXVsdGlsaW5lRmllbGQoc3RyOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gIGlmICghc3RyKSByZXR1cm4gW107XG4gIHJldHVybiBzdHIuc3BsaXQoL1ssXFxuO10vKS5tYXAocyA9PiBzLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pO1xufVxuXG5mdW5jdGlvbiBmb3JtYXREYXRlKGRhdGVTdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmICghZGF0ZVN0cikgcmV0dXJuICcnO1xuICB0cnkge1xuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyKTtcbiAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoJ3B0LUJSJyk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBkYXRlU3RyO1xuICB9XG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIkFzYW5hQ2xpZW50IiwiR0VUIiwiYXNhbmFDbGllbnQiLCJ3b3Jrc3BhY2VzIiwiZ2V0V29ya3NwYWNlcyIsImxlbmd0aCIsImpzb24iLCJzdWNjZXNzIiwiZXJyb3IiLCJzdGF0dXMiLCJ3b3Jrc3BhY2UiLCJvcGVyYXRpb25hbFByb2plY3QiLCJmaW5kT3BlcmF0aW9uYWxQcm9qZWN0IiwiZ2lkIiwidGFza3MiLCJnZXRQcm9qZWN0VGFza3MiLCJjb25zb2xlIiwibG9nIiwidHJhY2tpbmdzIiwiZmlsdGVyIiwidGFzayIsIm5hbWUiLCJ0cmltIiwibWFwIiwidHJhbnNmb3JtQXNhbmFUYXNrVG9UcmFja2luZyIsImRhdGEiLCJtZXRhIiwicHJvamVjdCIsInRvdGFsVGFza3MiLCJ0cmFja2luZ1Rhc2tzIiwibGFzdFVwZGF0ZSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImRldGFpbHMiLCJFcnJvciIsIm1lc3NhZ2UiLCJjdXN0b21GaWVsZHMiLCJjdXN0b21fZmllbGRzIiwiZm9yRWFjaCIsImZpZWxkIiwia2V5IiwidG9Mb3dlckNhc2UiLCJub3JtYWxpemUiLCJyZXBsYWNlIiwidGV4dF92YWx1ZSIsIm51bWJlcl92YWx1ZSIsInRvU3RyaW5nIiwiZW51bV92YWx1ZSIsInRyYWNraW5nSWQiLCJpZCIsImFzYW5hSWQiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwibm90ZXMiLCJjb21wbGV0ZWQiLCJtb2RpZmllZF9hdCIsImNyZWF0ZWRfYXQiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJ0cmFuc3BvcnQiLCJleHBvcnRlciIsImV4dHJhY3RGaWVsZCIsImNvbXBhbnkiLCJ2ZXNzZWwiLCJibEF3YiIsImNvbnRhaW5lcnMiLCJwYXJzZU11bHRpbGluZUZpZWxkIiwidGVybWluYWwiLCJzY2hlZHVsZSIsImV0YSIsImZvcm1hdERhdGUiLCJmcmVldGltZSIsInJlc3BvbnNpYmxlIiwiYXNzaWduZWUiLCJwYXJ0bmVycyIsImRpc3BhdGNoZXIiLCJ0cmFuc3BvcnRlciIsImludm9pY2VzIiwicG9zc2libGVOYW1lcyIsInN0ciIsInNwbGl0IiwicyIsIkJvb2xlYW4iLCJkYXRlU3RyIiwiZGF0ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/asana/trackings/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/asana-client.ts":
/*!*********************************!*\
  !*** ./src/lib/asana-client.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsanaClient: () => (/* binding */ AsanaClient)\n/* harmony export */ });\n// src/lib/asana-client.ts - Updated para projeto \"Operacional\"\nconst ASANA_BASE_URL = \"https://app.asana.com/api/1.0\";\nconst ASANA_TOKEN = process.env.ASANA_PERSONAL_ACCESS_TOKEN;\nclass AsanaClient {\n    constructor(){\n        this.headers = {\n            \"Accept\": \"application/json\",\n            \"Authorization\": `Bearer ${ASANA_TOKEN}`,\n            \"Content-Type\": \"application/json\"\n        };\n    }\n    async request(endpoint, options = {}) {\n        const url = `${ASANA_BASE_URL}${endpoint}`;\n        try {\n            const response = await fetch(url, {\n                headers: this.headers,\n                ...options\n            });\n            if (!response.ok) {\n                const errorText = await response.text();\n                throw new Error(`Asana API Error: ${response.status} - ${errorText}`);\n            }\n            return response.json();\n        } catch (error) {\n            console.error(\"Asana API Request Error:\", error);\n            throw error;\n        }\n    }\n    async getWorkspaces() {\n        const response = await this.request(\"/workspaces\");\n        return response.data;\n    }\n    async getProjects(workspaceGid) {\n        const response = await this.request(`/projects?workspace=${workspaceGid}&opt_fields=name,notes,created_at&limit=100`);\n        return response.data;\n    }\n    async findOperationalProject(workspaceGid) {\n        const projects = await this.getProjects(workspaceGid);\n        // Busca exata por \"Operacional\"\n        const operationalProject = projects.find((p)=>p.name.toLowerCase().includes(\"operacional\") || p.name.toLowerCase() === \"operacional\");\n        if (!operationalProject) {\n            console.log(\"Available projects:\", projects.map((p)=>p.name));\n            throw new Error(`Projeto \"Operacional\" não encontrado. Projetos disponíveis: ${projects.map((p)=>p.name).join(\", \")}`);\n        }\n        return operationalProject;\n    }\n    async getProjectTasks(projectGid) {\n        const optFields = [\n            \"name\",\n            \"notes\",\n            \"completed\",\n            \"assignee.name\",\n            \"custom_fields.name\",\n            \"custom_fields.text_value\",\n            \"custom_fields.number_value\",\n            \"custom_fields.enum_value.name\",\n            \"due_date\",\n            \"created_at\",\n            \"modified_at\",\n            \"tags.name\"\n        ].join(\",\");\n        const response = await this.request(`/tasks?project=${projectGid}&opt_fields=${optFields}&limit=100`);\n        return response.data;\n    }\n    async getTask(taskGid) {\n        const optFields = [\n            \"name\",\n            \"notes\",\n            \"completed\",\n            \"assignee.name\",\n            \"custom_fields.name\",\n            \"custom_fields.text_value\",\n            \"custom_fields.number_value\",\n            \"custom_fields.enum_value.name\",\n            \"due_date\",\n            \"created_at\",\n            \"modified_at\",\n            \"tags.name\"\n        ].join(\",\");\n        const response = await this.request(`/tasks/${taskGid}?opt_fields=${optFields}`);\n        return response.data;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TyxFQUFFaUMsUUFBUSxZQUFZLEVBQUVGLFVBQVUsQ0FBQztRQUU3QyxPQUFPM0IsU0FBU1csSUFBSTtJQUN0QjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcG9ydGZvbGlvLXBhZ2VzLy4vc3JjL2xpYi9hc2FuYS1jbGllbnQudHM/NDJhYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvbGliL2FzYW5hLWNsaWVudC50cyAtIFVwZGF0ZWQgcGFyYSBwcm9qZXRvIFwiT3BlcmFjaW9uYWxcIlxuY29uc3QgQVNBTkFfQkFTRV9VUkwgPSAnaHR0cHM6Ly9hcHAuYXNhbmEuY29tL2FwaS8xLjAnO1xuY29uc3QgQVNBTkFfVE9LRU4gPSBwcm9jZXNzLmVudi5BU0FOQV9QRVJTT05BTF9BQ0NFU1NfVE9LRU47XG5cbmV4cG9ydCBjbGFzcyBBc2FuYUNsaWVudCB7XG4gIHByaXZhdGUgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmhlYWRlcnMgPSB7XG4gICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7QVNBTkFfVE9LRU59YCxcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcmVxdWVzdDxUPihlbmRwb2ludDogc3RyaW5nLCBvcHRpb25zOiBSZXF1ZXN0SW5pdCA9IHt9KTogUHJvbWlzZTxUPiB7XG4gICAgY29uc3QgdXJsID0gYCR7QVNBTkFfQkFTRV9VUkx9JHtlbmRwb2ludH1gO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQXNhbmEgQVBJIEVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gLSAke2Vycm9yVGV4dH1gKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignQXNhbmEgQVBJIFJlcXVlc3QgRXJyb3I6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0V29ya3NwYWNlcygpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8YW55PignL3dvcmtzcGFjZXMnKTtcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgfVxuXG4gIGFzeW5jIGdldFByb2plY3RzKHdvcmtzcGFjZUdpZDogc3RyaW5nKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PGFueT4oXG4gICAgICBgL3Byb2plY3RzP3dvcmtzcGFjZT0ke3dvcmtzcGFjZUdpZH0mb3B0X2ZpZWxkcz1uYW1lLG5vdGVzLGNyZWF0ZWRfYXQmbGltaXQ9MTAwYFxuICAgICk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gIH1cblxuICBhc3luYyBmaW5kT3BlcmF0aW9uYWxQcm9qZWN0KHdvcmtzcGFjZUdpZDogc3RyaW5nKTogUHJvbWlzZTxhbnkgfCBudWxsPiB7XG4gICAgY29uc3QgcHJvamVjdHMgPSBhd2FpdCB0aGlzLmdldFByb2plY3RzKHdvcmtzcGFjZUdpZCk7XG4gICAgXG4gICAgLy8gQnVzY2EgZXhhdGEgcG9yIFwiT3BlcmFjaW9uYWxcIlxuICAgIGNvbnN0IG9wZXJhdGlvbmFsUHJvamVjdCA9IHByb2plY3RzLmZpbmQocCA9PiBcbiAgICAgIHAubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdvcGVyYWNpb25hbCcpIHx8XG4gICAgICBwLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ29wZXJhY2lvbmFsJ1xuICAgICk7XG5cbiAgICBpZiAoIW9wZXJhdGlvbmFsUHJvamVjdCkge1xuICAgICAgY29uc29sZS5sb2coJ0F2YWlsYWJsZSBwcm9qZWN0czonLCBwcm9qZWN0cy5tYXAocCA9PiBwLm5hbWUpKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgUHJvamV0byBcIk9wZXJhY2lvbmFsXCIgbsOjbyBlbmNvbnRyYWRvLiBQcm9qZXRvcyBkaXNwb27DrXZlaXM6ICR7cHJvamVjdHMubWFwKHAgPT4gcC5uYW1lKS5qb2luKCcsICcpfWApO1xuICAgIH1cblxuICAgIHJldHVybiBvcGVyYXRpb25hbFByb2plY3Q7XG4gIH1cblxuICBhc3luYyBnZXRQcm9qZWN0VGFza3MocHJvamVjdEdpZDogc3RyaW5nKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIGNvbnN0IG9wdEZpZWxkcyA9IFtcbiAgICAgICduYW1lJyxcbiAgICAgICdub3RlcycsXG4gICAgICAnY29tcGxldGVkJyxcbiAgICAgICdhc3NpZ25lZS5uYW1lJyxcbiAgICAgICdjdXN0b21fZmllbGRzLm5hbWUnLFxuICAgICAgJ2N1c3RvbV9maWVsZHMudGV4dF92YWx1ZScsXG4gICAgICAnY3VzdG9tX2ZpZWxkcy5udW1iZXJfdmFsdWUnLCBcbiAgICAgICdjdXN0b21fZmllbGRzLmVudW1fdmFsdWUubmFtZScsXG4gICAgICAnZHVlX2RhdGUnLFxuICAgICAgJ2NyZWF0ZWRfYXQnLFxuICAgICAgJ21vZGlmaWVkX2F0JyxcbiAgICAgICd0YWdzLm5hbWUnXG4gICAgXS5qb2luKCcsJyk7XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDxhbnk+KFxuICAgICAgYC90YXNrcz9wcm9qZWN0PSR7cHJvamVjdEdpZH0mb3B0X2ZpZWxkcz0ke29wdEZpZWxkc30mbGltaXQ9MTAwYFxuICAgICk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gIH1cblxuICBhc3luYyBnZXRUYXNrKHRhc2tHaWQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgY29uc3Qgb3B0RmllbGRzID0gW1xuICAgICAgJ25hbWUnLFxuICAgICAgJ25vdGVzJyxcbiAgICAgICdjb21wbGV0ZWQnLFxuICAgICAgJ2Fzc2lnbmVlLm5hbWUnLFxuICAgICAgJ2N1c3RvbV9maWVsZHMubmFtZScsXG4gICAgICAnY3VzdG9tX2ZpZWxkcy50ZXh0X3ZhbHVlJyxcbiAgICAgICdjdXN0b21fZmllbGRzLm51bWJlcl92YWx1ZScsIFxuICAgICAgJ2N1c3RvbV9maWVsZHMuZW51bV92YWx1ZS5uYW1lJyxcbiAgICAgICdkdWVfZGF0ZScsXG4gICAgICAnY3JlYXRlZF9hdCcsXG4gICAgICAnbW9kaWZpZWRfYXQnLFxuICAgICAgJ3RhZ3MubmFtZSdcbiAgICBdLmpvaW4oJywnKTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PGFueT4oXG4gICAgICBgL3Rhc2tzLyR7dGFza0dpZH0/b3B0X2ZpZWxkcz0ke29wdEZpZWxkc31gXG4gICAgKTtcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgfVxufSJdLCJuYW1lcyI6WyJBU0FOQV9CQVNFX1VSTCIsIkFTQU5BX1RPS0VOIiwicHJvY2VzcyIsImVudiIsIkFTQU5BX1BFUlNPTkFMX0FDQ0VTU19UT0tFTiIsIkFzYW5hQ2xpZW50IiwiY29uc3RydWN0b3IiLCJoZWFkZXJzIiwicmVxdWVzdCIsImVuZHBvaW50Iiwib3B0aW9ucyIsInVybCIsInJlc3BvbnNlIiwiZmV0Y2giLCJvayIsImVycm9yVGV4dCIsInRleHQiLCJFcnJvciIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsImNvbnNvbGUiLCJnZXRXb3Jrc3BhY2VzIiwiZGF0YSIsImdldFByb2plY3RzIiwid29ya3NwYWNlR2lkIiwiZmluZE9wZXJhdGlvbmFsUHJvamVjdCIsInByb2plY3RzIiwib3BlcmF0aW9uYWxQcm9qZWN0IiwiZmluZCIsInAiLCJuYW1lIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImxvZyIsIm1hcCIsImpvaW4iLCJnZXRQcm9qZWN0VGFza3MiLCJwcm9qZWN0R2lkIiwib3B0RmllbGRzIiwiZ2V0VGFzayIsInRhc2tHaWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/asana-client.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fasana%2Ftrackings%2Froute&page=%2Fapi%2Fasana%2Ftrackings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fasana%2Ftrackings%2Froute.ts&appDir=%2Fworkspaces%2Fsistemaduri%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2Fsistemaduri&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();